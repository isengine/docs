# Запись прав

Записи прав выглядят следующим образом.

	"collection" : {
		"query" : {
			"method" : "",
			"filters" : [
				"name" : "value",
				...
			],
			"owner" : true/false,
			"allow" : [
				"key",
				...
			],
			"deny" : [
				"key",
				...
			]
		},
		...
	},
	...

Первым ключом, collection, идет название раздела базы данных. В него вложены настройки прав.

Следующим ключом, query, идет название операции. Стандартные операции:

	read - чтение
	write - запись, имеется ввиду перезапись данных в уже существующих записях
	create - добавление новой записи, если такая запись уже есть, то она не перезаписывается
	delete - удаление записи

В них вложены параметры управления правами доступа.

Если нужно задать общие права, можно ограничиться значениями true/false, например:

	"read" : true,
	"write" : false,
	...

Если права для какого-либо раздела не заданы, раздел пропущен или его значение null,
это означает, что для доступа к нему будет применяться значение по-умолчанию.

В ядре оно задано через конфигурацию.

Однако можно настроить права более гибко.

Теперь правила строятся на основе фильтров и используют такой же синтаксис.

Таким образом, можно отсеивать как отдельные записи, так и группы, и даже отсеивать записи по отдельным полям данных.

Однако, мы рекомендуем фильтровать записи на основе следующих параметров:

	name
	type
	parents
	ctime
	mtime
	dtime

Фильтры задаются массивом в группе filters. Метод сравнения - и/или - задается через method. Например:

	"method" : "and"

или

	"method" : "or"

Если вы хотите разрешить полный доступ к управлению своей записью, можете включить параметр owner:

	"owner" : true

Своей записью считается та, для которой имя вашего пользователя user:name (не родительская группа, а именно имя),
входит в список владельцев owner.

Права владельца, если они разрешены, являются приоритетными над фильтрами.

Также вы можете более гибко управлять данными записей через правила allow и deny.

Например, вы можете скрыть определенные данные, перечислив их ключи в массиве deny.

Или, наоборот, вы можете разрешить только те данные, ключи которых будут заданы в массиве allow.

Не рекомендуется сочетать оба этих правила. Но если говорить чисто технически, то по приоритету сначала действует правило deny, а после - allow.
