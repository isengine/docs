# Работа с объектами

Пространство имен:

    use is\Helpers\Objects;

## Objects::associate

    Objects::associate($item)

Функция проверяет, является ли массив ассоциативным.

**item**
Тип: **системный объект**
Проверяемый массив

Возвращает **true** при совпадении и **null** в противном случае.

## Objects::numeric

    Objects::numeric($item)

Функция проверяет, является ли массив состоящим из цифр.

**item**
Тип: **системный объект**
Проверяемый массив

Возвращает **true** при совпадении и **null** в противном случае.

## Objects::convert

    Objects::convert($item)

Функция преобразует любые входные данные в системный объект.

**item**
Тип: **смешанный**
Входные данные

Возвращает системный объект.

## Objects::keys

    Objects::keys($item)

Функция возврата ключей массива.

**item**
Тип: **системный объект**
Входящий массив

Возвращает простой массив, состоящий из ключей входящего массива.

## Objects::values

    Objects::values($item)

Функция возврата значений массива.

**item**
Тип: **системный объект**
Входящий массив

Возвращает простой массив, состоящий из значений входящего массива.

## Objects::match

    Objects::match($haystack, $needle)

Функция проверки наличия значения в заданном массиве.

**haystack**
Тип: **системный объект**
Исходный массив

**needle**
Тип: **смешанный**
Проверяемое значение

Проверка ведется с дополнительной проверкой строк и чисел:

* 3 равно '3'

Возвращает **true** при совпадении и **null** в противном случае.

## Objects::find

    Objects::find($haystack, $needle, $position = null)

Функция поиска строки или символа в заданном массиве.

**haystack**
Тип: **системный объект**
Исходный массив

**needle**
Тип: **смешанный**
Искомое значение

**position**
Тип: **смешанный** *(необязательный)*
Позиция поиска

Если задан необязательный аргумент **position**, то функция ищет соответствие строки в заданном ключе.

Позиция поиска может быть задана строкой или числом. В этом случае искомое значение будет проверяться только в указанной позиции (ключе).

Отрицательное число будет рассмотрено как позиция от конца массива.

Если **position** не задан, функция вернет первый ключ с найденным значением.

Специальное значение **true** меняет поведение функции, и она возвращает последний ключ с найденным значением.

## Objects::get

    Objects::get($haystack, $index, $length = null, $position = null)

Функция возвращает срез массива по указанному индексу и заданной длине.

**haystack**
Тип: **системный объект**
Исходный массив

**index**
Тип: **смешанный**
Индекс от начала массива

**length**
Тип: **смешанный** *(необязательный)*
Длина, количество значений

**position**
Тип: **смешанный** *(необязательный)*
Позиция смещения

Функция возвращает новый массив, взятый от исходного массива по указанному индексу (позиции) и заданной длине.

Если длина не задана, то возвращается срез до конца массива.

Если длина задана положительным числом, то она считается вперед от индекса. Если отрицательным - то назад.

Специальное значение **true** аргумента **position** меняет поведение функции, и она считает длину от конца массива.

Функция корректно обрабатывает как простые, так и ассоциативные массивы.

## Objects::cut

    Objects::cut($haystack, $index, $length = null, $position = null)

Функция удаления части массива по указанному индексу (позиции) и заданной длине.

**haystack**
Тип: **системный объект**
Исходный массив

**index**
Тип: **смешанный**
Индекс от начала массива

**length**
Тип: **смешанный** *(необязательный)*
Длина, количество значений

**position**
Тип: **смешанный** *(необязательный)*
Позиция смещения

Функция работает как **Objects::get**, только теперь возвращается массив без среза.

Другими словами, указанная часть удаляется из массива.

Функция корректно обрабатывает как простые, так и ассоциативные массивы.

## Objects::before

    Objects::before($haystack, $needle, $include = null, $reverse = null)

Возвращает срез массива до заданного значения.

**haystack**
Тип: **системный объект**
Исходный массив

**needle**
Тип: **смешанный**
Искомое значение

**include**
Тип: **смешанный** *(необязательный)*
Включение искомого значения

**reverse**
Тип: **смешанный** *(необязательный)*
Обратный отсчет

Функция возвращает срез массива до первого заданного значения.

Включение необязательного аргумента **include** позволяет включить в результат искомое значение.

Включение необязательного аргумента **reverse** меняет действие функции так, что она возвращает срез массива до последнего заданного значения.

Функция корректно обрабатывает как простые, так и ассоциативные массивы.

## Objects::after

    Objects::after($haystack, $needle, $include = null, $reverse = null)

Возвращает срез массива после заданного значения.

**haystack**
Тип: **системный объект**
Исходный массив

**needle**
Тип: **смешанный**
Искомое значение

**include**
Тип: **смешанный** *(необязательный)*
Включение искомого значения

**reverse**
Тип: **смешанный** *(необязательный)*
Обратный отсчет

Функция возвращает срез массива после первого заданного значения.

Включение необязательного аргумента **include** позволяет включить в результат искомое значение.

Включение необязательного аргумента **reverse** меняет действие функции так, что она возвращает срез массива после последнего заданного значения

Функция корректно обрабатывает как простые, так и ассоциативные массивы.

## Objects::add

    Objects::add($haystack, $needle, $recursive = null)

Добавление значений в массив.

**haystack**
Тип: **смешанный**
Исходные данные

**needle**
Тип: **смешанный**
Добавляемые данные

**recursive**
Тип: **смешанный** *(необязательный)*
Рекурсия

Функция возвращает новый массив, созданный из двух указанных, таким образом, что второй добавляется в конец первого.

Пример:

    $array1 = ['a', 'b', 'c'];
    $array2 = ['d', 'e', 'f'];
    $result = Objects::add($array1, $array2);

Результат:

    ['a', 'b', 'c', 'd', 'e', 'f']

Если в **haystack** и/или **needle** были переданы скалярные значения, то они конвертируются в массив.

Пример:

    $array1 = 'a';
    $array2 = 'b';
    $result = Objects::add($array1, $array2);

Результат:

    ['a', 'b']

Если массив **needle** содержит ключи, совпадающие c ключами в массиве **haystack**, то значения таких ключей в результирующем массиве будут переписаны. Исключением являются числовые ключи.

Пример:

    $array1 = ['first' => 1, 'second' => 2, 'a', 'b', 'c'];
    $array2 = ['d', 'e', 'f', 'first' => 'one'];
    $result = Objects::add($array1, $array2);

Результат:

    ['first' => 'one', 'second' => 2, 'a', 'b', 'c', 'd', 'e', 'f']

Включение необязательного аргумента **recursive** позволяет объединять массивы рекурсивно, т.е. по всей глубине массива.

Пример:

    $array1 = [ 'first' => ['a', 'b', 'c'] ];
    $array2 = [ 'first' => ['d', 'e', 'f'] ];
    $result1 = Objects::add($array1, $array2);
    $result2 = Objects::add($array1, $array2, true);

Результат:

    [ 'first' => ['d', 'e', 'f'] ]
    [ 'first' => ['a', 'b', 'c', 'd', 'e', 'f'] ]

## Objects::reverse

    Objects::reverse($item)

Разворот массива.

**item**
Тип: **системный объект**
Массив

Функция меняет порядок ключей таким образом, что первый становится последним и т.д.

В ассоциативных массивах соответствие ключей и их значений не меняется. В простых массивах ключи сбрасываются.

Пример:

    $array1 = ['a' => 1, 'b' => 2, 'c' => 3];
    $array2 = [0 => 'a', 2 => 'b', 4 => 'c'];
    $result1 = Objects::reverse($array1);
    $result2 = Objects::reverse($array2);

Результат:

    ['c' => 3, 'b' => 2, 'a' => 1]
    [0 => 'c', 1 => 'b', 2 => 'a']

## Objects::first

    Objects::first($item, $result = null)

Возврат первого элемента массива.

**item**
Тип: **системный объект**
Массив

**result**
Тип: **смешанный** *(необязательный)*
Выбор результата

Функция возвращает первый элемент массива.

По-умолчанию результат возвращается в виде массива из пары **ключ => значение**.

Необязательный аргумент **result** меняет поведение функции таким образом:

* key - возвращается только ключ
* value - возвращается только значение

Пример:

    $array = ['a' => 1, 'b' => 2, 'c' => 3];
    $result1 = Objects::first($array);
    $result2 = Objects::first($array, 'value');

Результат:

    ['a' => 1]
    1

## Objects::last

    Objects::last($item, $result = null)

Возврат последнего элемента массива.

**item**
Тип: **системный объект**
Массив

**result**
Тип: **смешанный** *(необязательный)*
Выбор результата

Действие функции аналогично **Objects::first**, за тем исключением, что возвращается последний элемент массива.

Пример:

    $array = ['a' => 1, 'b' => 2, 'c' => 3];
    $result1 = Objects::last($array);
    $result2 = Objects::last($array, 'value');

Результат:

    ['c' => 3]
    3

## Objects::refirst

    Objects::refirst(&$item, $data)

Замена значения первого элемента массива.

**item**
Тип: **системный объект**
Массив

**data**
Тип: **смешанный**
Значение

Функция заменяет значение первого элемента массива на **data** и возращает полученный массив.

Функция корректно обрабатывает как простые, так и ассоциативные массивы.

## Objects::relast

    Objects::relast(&$item, $data)

Замена значения последнего элемента массива.

**item**
Тип: **системный объект**
Массив

**data**
Тип: **смешанный**
Значение

Функция заменяет значение последнего элемента массива на **data** и возращает полученный массив.

Функция корректно обрабатывает как простые, так и ассоциативные массивы.

## Objects::unfirst

    Objects::unfirst(&$item)

Удаляет первый элемент массива.

**item**
Тип: **системный объект**
Массив

Функция полностью удаляет из массива его первый элемент и возращает полученный массив.

Функция корректно обрабатывает как простые, так и ассоциативные массивы.

## Objects::unlast

    Objects::unlast(&$item)

Удаляет последний элемент массива.

**item**
Тип: **системный объект**
Массив

Функция полностью удаляет из массива его последний элемент и возращает полученный массив.

Функция корректно обрабатывает как простые, так и ассоциативные массивы.

## Objects::len

    Objects::len($item)

Вычисление длины массива.

**item**
Тип: **системный объект**
Массив

Функция возврата количества элементов массива в виде числа.

Функция корректно обрабатывает как простые, так и ассоциативные массивы.

## Objects::split

    Objects::split($array)

Разбивает массив на системный объект по парам **ключ => значение**.

**array**
Тип: **системный объект**
Массив

Функция разбивает исходный массив на пары, в которой первое значение становится ключом.

В результате создается системный объект.

Пример:

    $array = ['a', 'b', 'c', 'd', 'e', 'f'];
    $result = Objects::split($array);

Результат:

    ['a' => 'b', 'c' => 'd', 'e' => 'f']

## Objects::join

    Objects::join($keys, $values, $default = null)

Создание массива из ключей и значений.

**keys**
Тип: **системный объект**
Массив ключей

**values**
Тип: **системный объект**
Массив значений

**default**
Тип: **смешанный** *(необязательный)*
Значение недостающих элементов

Функция создает массив из двух массивов. Первый используется в качестве ключей, второй - в качестве значений.

Если длина массивов разная, то итоговый массив создается по длине массива ключей. Если массив ключей больше массива значений, то результат будет дополнен недостающими значениями, взятыми из аргумента **default**.

Если в качестве **values** передан не массив, то массив ключей будет целиком заполнен значениями аргумента **values**.

## Objects::combine

    Objects::combine($item, $result = [])

Превращает многомерный массив в одномерный.

**item**
Тип: **системный объект**
Исходный массив

**result**
Тип: **системный объект** *(необязательный)*
Служебный массив

Функция объединяет многомерный массив в одномерный.

Функция является рекурсивной, для рекурсии используется служебный аргумент **result**. Если изначально вызвать функцию вместе с ним, то результат может оказаться неожиданным.

## Objects::combineByIndex

    Objects::combineByIndex($item, $result = [])

Превращает многомерный массив в одномерный с сохранением ключей.

**item**
Тип: **системный объект**
Исходный массив

**result**
Тип: **системный объект** *(необязательный)*
Служебный массив

Работа функции идентична **Objects::combine**, за тем исключением, что в результирующем массиве сохраняются ключи.

Если ключи вложенных массивов будут совпадать с исходным, то произойдет замена значений на последнее найденное.

## Objects::merge

    Objects::merge($item, $merge, $recursive = null)

Объединение двух массивов в один.

**item**
Тип: **системный объект**
Исходный массив

**merge**
Тип: **системный объект**
Добавляемый массив

**recursive**
Тип: **смешанный** *(необязательный)*
Рекурсия

Функция возвращает новый массив, созданный из двух указанных, таким образом, что второй дополняет первый.

Если массив **needle** содержит ключи, совпадающие c ключами в массиве **haystack**, то значения таких ключей в результирующем массиве будут переписаны. Это касается и числовых ключей.

Пример:

    $array1 = ['a', 'b', 'c'];
    $array2 = ['d', 'e', 'f'];
    $result = Objects::add($array1, $array2);

Результат:

    ['d', 'e', 'f']

Включение необязательного аргумента **recursive** позволяет объединять массивы рекурсивно, т.е. по всей глубине массива.

## Objects::each

    Objects::each(&$item, $callback, $ignore = null)

Последовательный перебор каждого элемента массива.

**item**
Тип: **системный объект**
Массив

**callback**
Тип: **функция**
Callback-функция

**ignore**
Тип: **смешанный** *(необязательный)*
Триггер, который позволяет обрабатывать пустые массивы

По-сути, это простая замена оператора **foreach**. Однако действие этого оператора не является одинаковым в разных языках программирования, либо он может вообще отсутствовать.

К тому же данная функция перед выполнением проверяет, является ли переданное значение не пустым массивом. Другими словами, имеет ли смысл его итерировать. И в случае отказа, возвращает **null**.

В ряде случаев это является удобным, т.к. не выбрасывает ошибку и не приходится обрабатывать исключения.

Callback-функция может принимать до трех аргументов:

* value - текущее значение
* key - текущий ключ
* position - текущая позиция, специальное значение

Специальное значение текущей позиции может иметь следующие значения:

* first - первый элемент массива
* last - последний элемент массива
* alone - единственный элемент в массиве

Возвращаемое значение callback-функции становится значением текущего элемента массива.

> Будьте внимательными с этим. Чтобы не потерять значения, не забывайте про оператор **return**!

Callback-функция также может быть анонимной:

    Objects::each($array, function($item, $key, $position){
      ...
      return $item;
    });

Для примера, код без использования данной функции, с оператором **foreach**:

    if (System::typeIterable($array)) {
      
      $service = [
        Objects::first($array, 'key'),
        Objects::last($array, 'key'),
        Objects::len($array)
      ];
      
      foreach ($array as $key => $item) {
        
        if ($service[2] === 1) {
          $position = 'alone';
        } elseif ($key === $service[0]) {
          $position = 'first';
        } elseif ($key === $service[1]) {
          $position = 'last';
        }
        
        ...
      }
      unset($key, $item);
      
    }

## Objects::eachOf

    Objects::eachOf(&$item = null, $parameters = null, $callback)

***устаревшая***
Это универсальная замена foreach, которая управляет элементами в текущем массиве.

**item** - входящий массив или объект

**parameter** - параметр, который влияет на поведение в случае, когда значение 'item' = 'false' (но не null и не любое другое):

* filter - передает в качестве результата копию исходного массива и удаляет из него текущий элемент
* break - прерывает цикл
* continue - переходит к следующей итерации

Специальное значение параметра в виде массива или объекта, передает в функцию этот объект третьим параметром (не забудьте сделать его ссылкой) и вы можете изменять его

**callback** - callback-функция, как правило анонимная, которая работает в итерации входящего массива, принимает параметры:

* текущее значение
* текущий ключ
* возвращаемый массив или объект (не забудьте сделать его ссылкой), если он передан в параметр

Любой из этих параметров можно не указывать, и тогда они не будут участвовать в процессе.

Эта функция возвращает результат, который записывается вместо текущего значения.

Если вы хотите использовать входящий массив или строку, используйте их, переданными в виде объекта/массива через параметр.

Например:

    eachOf($array, [ 'str' => null ], function ($v, $k, $p){ $p['str'] .= '...'; });

Производительность этой функции медленнее в 1.5-2.5 раза по сравнению с foreach, но на сложных расчетах внутри итерации ее скорость становится такой же, как у foreach. И для мелких итераций ее скорость остается почти такой же. И она расходует столько же памяти, как foreach.

Удобство ее использования в том, что она универсальна как для php, так и для js.

## Objects::clear

    Objects::clear($item, $unique = null)

Очищает массив от пустых элементов.

**item**
Тип: **системный объект**
Массив

**unique**
Тип: **смешанный** *(необязательный)*
Убрать повторяющиеся значения

Данная функция очищает массив от пустых значений и возвращает готовый массив. Является рекурсивной.

Так же как и во всей системе, ноль не считается пустым значенем.

Включение необязательного аргумента **unique** позволяет избавить массив от повторяющихся значений.

Если Вам нужно не только очистить массив, но и убрать повторяющиеся значения, использование аргумента **unique** по сравнению с вызовом функции **Objects::unique** является лучшим решением.

Обе функции - эта и **Objects::unique**, последовательно обходят массив. Если Вы вызовете их поочереди, это будет дополнительной нагрузкой на процессор и память, и Вы потеряете больше времени.

## Objects::unique

    Objects::unique($item)

Убирает повторяющиеся элементы в массиве.

**item**
Тип: **системный объект**
Массив

Эта функция очищает массив от повторяющихся значений и возвращает готовый массив.

Если Вам, кроме того, нужно очистить массив от пустых значений, предпочтительнее использовать функцию **Objects::clear** со включенным аргументом **unique**. Так Вы сэкономите время и ресурсы сервера.

## Objects::sort

    Objects::sort($haystack, $reverse = false, $keys = false)

Сортировка массива.

**haystack**
Тип: **системный объект**
Массив

**reverse**
Тип: **смешанный** *(необязательный)*
Обратный порядок

**keys**
Тип: **смешанный** *(необязательный)*
По ключам

Функция сортировки массива с сохранением ключей в ассоциативном массиве.

Если сравнивать с PHP, то сортировка всегда идет с флагом NATCASESORT и без учета регистра.

Вторым аргументом можно задать сортировку в обратном порядке.

Третьим аргументом можно задать сортировку по ключам.

## Objects::random

    Objects::random($haystack)

Сортировка массива в случайном порядке.

**haystack**
Тип: **системный объект**
Массив

Функция сортирует массив в случайном порядке с сохранением ключей в ассоциативном массиве.

## Objects::difference

    Objects::difference($haystack, $needle)

Вычисление расхождений в массивах.

**haystack**
Тип: **системный объект**
Массив

**needle**
Тип: **системный объект**
Массив

Функция возвращает массив, содержащий элементы **haystack**, значения которых не присутствуют в массиве **needle**. Ключи сохраняются.

## Objects::pairs

    Objects::pairs($array, $splitter, $offset = null)

Разделение массива на два по заданному значению.

**array**
Тип: **системный объект**
Исходный массив

**splitter**
Тип: **смешанный**
Разделитель

**offset**
Тип: **смешанный** *(необязательный)*
Включение разделителя в результат

Функция разбивает массив на две части. Одна - до значения **splitter**, вторая - после.

Результатом является массив, внутри которого содержатся оба этих массива.

По-умолчанию значение **splitter** не входит ни в один из массивов. Однако, если указать смещение **offset**, то **splitter** войдет в результат.

Если **offset** < 0, то **splitter** войдет в первый массив. Если **offset** > 0, то **splitter** войдет во второй массив.

## Objects::pairsByIndex

    Objects::pairsByIndex($array, $splitter, $offset = null)

Разделение массива на два по ключу.

**array**
Тип: **системный объект**
Исходный массив

**splitter**
Тип: **смешанный**
Разделитель

**offset**
Тип: **смешанный** *(необязательный)*
Включение разделителя в результат

Функция полностью повторяет **Objects::pairs** за тем исключением, что массив разбивается по ключу, а не по значению.

## Objects::flip

    Objects::flip($array)

Меняет значения и ключи массива местами.

**array**
Тип: **системный объект**
Массив

Функция меняет местами значения и ключи массива.

> Будьте внимательны. Каждые два и более одинаковых значений, став ключами, сократятся до одного!

## Objects::inject

    Objects::inject($haystack, $map, $value = null)

Изменение данных в многомерных массивах.

**haystack**
Тип: **системный объект**
Исходный массив

**map**
Тип: **системный объект**
Массив-карта

**value**
Тип: **смешанный**
Значение

Функция берет исходный массив **haystack**, добирается до его глубины, заданной картой **map** и помещает туда значение **value**.

Особенность данной функции в том, что она дополняет массив и не стирает другие имеющиеся в нем поля.

На входе нужно указать исходный массив, **который** будем заполнять **(haystack)** и массив **(map)**, содержащий ключи, **которыми** будем заполнять.

Третий, необязательный, аргумент - это значение.

> Нужно учесть, что по-умолчанию пустые значения не заполняются!

Пример:

    Objects::inject(['data' => null], ['a', 'b', 'c'], 'value')

Результат:

    ['data' => ['a' => ['b' => ['c' => 'value']]]];

## Objects::extract

    Objects::extract($haystack, $map)

Извлечение данных в многомерных массивах.

**haystack**
Тип: **системный объект**
Исходный массив

**map**
Тип: **системный объект**
Массив-карта

Функция производит извлечение данных в многомерных массивах. Принцип ее работы похож на работу функции **Objects::inject**, с той разницей, что она возвращает значение.

На входе нужно указать исходный массив **haystack**, из **которого** будем извлекать данные,
и массив-карту **map**, согласно **которому** эти данные будем извлекать.

Пример:

    $haystack = ['a' => ['b' => ['c' => 1, 'd' => 2]]];
    $map = ['a', 'b', 'd'];
    Objects::extract($haystack, $map);

Результат:

    2

## Objects::reset

    Objects::reset(&$item)

Сбросить ключи массива

**item**
Тип: **системный объект**
Массив

Функция просто сбрасывает ключи массива, заменяя их индексами от 0 и далее по порядку.
