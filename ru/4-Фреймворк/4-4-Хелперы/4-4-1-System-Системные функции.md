# Системные функции

Пространство имен:

    use is\Helpers\System;

## System::includes

    System::includes($item, $base = __DIR__ . DS . DP, $once = true, $object = null, $return = null)

Подключение файлов.

**item**
Тип: **строка**
Имя подключаемого файла

**base**
Тип: **строка**
Путь к файлу

**once**
Тип: **смешанный**
Подключить данный файл только один раз

**object**
Тип: **смешанный**
Имя подключаемого файла

**return**
Тип: **строка**
Имя возвращаемой переменной

**Once** влияет не на первое включение, а только на повторные.

Если Вы хотите передать в подключаемый файл какие-либо данные, используйте **object** в качестве переменной или ссылки на объект.

Если Вы хотите получить какие-либо данные из подключаемого файла, используйте **return**, чтобы задать имя переменной, значение которой будет возвращено после выполнения подключенного файла.

## System::exists

    System::exists($item = null)

Проверка существования переменной.

**item**
Тип: **смешанный**
Имя переменной

Возвращает **true** если переменная была объявлена ранее и **false** в противном случае.

## System::set

    System::set($item = null, $yes = null, $no = null)

Логическая проверка значения переменной.

**item**
Тип: **смешанный**
Имя переменной

Функция проверяет, установлено выражение и не пустое ли оно. В качестве аргумета принимаются переменные, массивы, объекты, числа, строки, выражения и любые другие данные.

Возвращает **true** если проверка прошла успешно и **false** в противном случае.

Главное отличие от встроенных в PHP проверок в том, что ноль проходит проверку, а строки с пробелами - нет.

Подробное действие функции представлено в таблице ниже.

***Таблица сравнения***

|$x         |!empty($x)|isset($x)|if($x)|set($x)|
|-|-|-|-|-|
|**примеры на false**|||||
|null       |false     |false    |false |false  |
|false      |false     |true     |false |false  |
|''         |false     |true     |false |false  |
|[]         |false     |true     |false |false  |
|['']       |true      |true     |true  |false  |
|**примеры на true**|||||
|true       |true      |true     |true  |true   |
|0          |false     |true     |false |true   |
|'0'        |false     |true     |false |true   |
|1          |true      |true     |true  |true   |
|'1'        |true      |true     |true  |true   |
|'string'   |true      |true     |true  |true   |
|['0']      |true      |true     |true  |true   |
|['1']      |true      |true     |true  |true   |
|['string'] |true      |true     |true  |true   |
|**примеры на выражения**|||||
|is_int(1)  |true      |true     |true  |true   |
|is_int('1')|false     |false    |false |false  |

## System::setReturn

    System::setReturn($item = null, $before = null, $after = null, $not = null)

Проверка значения с его возвратом.

**item**
Тип: **смешанный**
Имя переменной

**before** *(устаревший)*
Тип: **смешанный**

**after** *(устаревший)*
Тип: **смешанный**

**not** *(устаревший)*
Тип: **смешанный**

Функция повторяет поведение функции System::set(), но в случае положительного ответа, возвращает переданное ей значение.

Необязательные аргументы **before** и **after** добавляются до и после значения.

Последний аргумент **not** возвращается в случае отрицательного ответа.

## System::type

    System::type($item = null, $compare = null)

Проверка типов.

**item**
Тип: **смешанный**
Имя переменной

**compare**
Тип: **string**
Сравнение с типом

Функция возвращает тип переменной **item**.

***Список типов***

* array - простой, неименованный не пустой массив
* object - объект/именованный не пустой массив
* null - пустой элемент, false, null, undefined, пустая строка или пустой объект/массив, но не ноль
* true - триггер/булев
* numeric - число, в том числе строка записанная числом
* string - строка

Если указать второй необязательный аргумент, то полученный тип аргумента **item** будет сверен с указанным в аргументе **compare**.

При положительном результате сравнения функция вернет **true**, иначе - **false**.

## System::typeOf

    System::typeOf($item = null, $compare = null)

Проверка упрощенных типов.

**item**
Тип: **смешанный**
Имя переменной

**compare**
Тип: **string**
Сравнение с типом

Функция возвращает упрощенный тип переменной **item**.

***Список упрощенных типов***

* scalar - скалярное значение, строка или число
* iterable - итерируемая переменная, объект или массив, возможно пустой
* null - любой другой тип данных

Если указать второй необязательный аргумент, то полученный тип аргумента **item** будет сверен с указанным в аргументе **compare**.

При положительном результате сравнения функция вернет **true**, иначе - **false**.

## System::typeData

    System::typeData($item = null, $compare = null)

Проверка на принадлежность к системному типу данных.

**item**
Тип: **смешанный**
Имя переменной

**compare**
Тип: **string**
Сравнение с типом

Функция возвращает системный тип переменной **item**.

***Список системных типов***

* string - системные данные
* object - системный объект
* json - данные в формате json
* null - любой другой тип данных

Если указать второй необязательный аргумент, то полученный тип аргумента **item** будет сверен с указанным в аргументе **compare**.

При положительном результате сравнения функция вернет **true**, иначе - **false**.

## System::typeClass

    System::typeClass($item = null, $compare = null)

Проверка на принадлежность к определенному имени класса.

**item**
Тип: **смешанный**
Имя переменной

**compare**
Тип: **string**
Сравнение с типом

Функция возвращает имя класса переменной **item**.

Если указать второй необязательный аргумент, то полученное имя класса аргумента **item** будет сверено с указанным в аргументе **compare**.

При положительном результате сравнения функция вернет **true**, иначе - **false**.

## System::typeIterable

    System::typeIterable($item = null)

Проверка переменной на возможность ее итерировать.

**item**
Тип: **смешанный**
Имя переменной

Функция проверяет переменную **item** на принадлежность к типу непустого массива или объекта.

При положительном результате сравнения функция вернет **true**, иначе - **false**.

## System::typeTo

    System::typeTo($item = null, $type = null)
		
Приведенние переменной к нужному типу.

**item**
Тип: **смешанный**
Значение переменной

**type**
Тип: **смешанный**
Нужный тип

Функция возвращает значение переменной, приведенное к нужному типу.

***Поддерживаемые типы***

* scalar - скаляный (строковый) тип, строка или число
* iterable - итерируемый (объектный) тип, массив
* object - объект
* array - массив
* numeric - число, в том числе число
* string - строка
* true - триггер или булев тип
* null - пустой элемент

Функция возвращает приведенное значение.

Ее также можно использовать для сброса значений или очистки переменной. Для этого нужно не указывать тип.

## System::server

    System::server($name)

Функция возращает разные данные сервера.

**item**
Тип: **смешанный**
Название запрашиваемых данных

***Список данных сервера***

* root - абсолютный путь к корневой папке проекта
* host - имя хоста (сайта)
* fullprotocol - полное название протокола, включая версию
* protocol - название протокола, http или https
* domain - имя домена, включая протокол
* request - запрошенный URL
* method - метод запроса, в нижнем регистре
* ip - ip-адрес клиента
* agent - полное имя агента (браузера) клиента, включая данные

## System::loop

    System::loop($num, $callback)

Вывод информации в служебную строку.

**num**
Тип: **смешанный**
Число итераций

**callback**
Тип: **функция**
Callback-функция

Функция делает цикл в заданном количестве итераций с использованием пользовательской функции.

В пользовательскую функцию передаются два аргумета. Первый - текущая позиция цикла, начиная с нуля.

Вторым аргументом пользовательская функция может принять переменную или объект, с которым будет работать. В эту же переменную записывается результат каждой итерации.

После окончания всех итераций, функция возвращает последний результат итерации.

По-сути, это простая замена оператора **while** со скрытыми лишними проверками. Ее удобно использовать как для простых, так и для достаточно сложных итераций.

Чтобы лучше понять работу функции, посмотрите следующие примеры.

В простых итерациях ряд аргуметов пользовательской функции может быть пропущен.

Простой пример использования:

    System::loop(5, function($c) {
      echo $c;
    });

Пример использования с пользовательской функцией без аргументов:

    System::loop(5, function() {
      echo '<p><br></p>';
    });

Пример создания массива:

    $a = [];
    $result = System::loop(5, function($c, $a) {
      $a[] = $c;
      return $a;
    });

Пример создания строки:

    $a = null;
    $result = System::loop(5, function($c, $a) {
      $a .= $c;
      return $a;
    });

В ряде случаев может потребоваться использовать внешний объект. Благодаря возможностям языка, его можно вставить как ссылку с оператором **use**.

Пример создания массива с использованием другого массива:

    $a = [];
    $i = ['a', 'b', 'c', 'd', 'e'];
    $result = System::loop(5, function($c, $a) use ($i) {
      $a[] = $i[$c];
      return $a;
    });
    
Пример использования цикла для работы с другим массивом:

    $i = ['a', 'b', 'c', 'd', 'e'];
    System::loop(5, function($c) use (&$i) {
      $i[$c] .= $c;
    });
    
Пример создания массива из строки:

    $i = 'abcde';
    $result = System::loop(5, function($c, $result) use ($i) {
      $result[] = Strings::get($i, $c, 1);
      return $result;
    });
    
Пример создания строки из массива:

    $i = ['a', 'b', 'c', 'd', 'e'];
    $result = System::loop(5, function($c, $result) use ($i) {
      $result .= $i[$c];
      return $result;
    });

Таким образом, функционал данной функции может быть как простым, так и довольно сложным, в зависимости от задач.

## System::debug

    System::debug(...$item)

Вывод информации в служебную строку.

**item**
Тип: **смешанный**
Различные данные для вывода

Функция принимает неограниченное число аргументов.

Вывод всегда идет через оператор **print_r()**, что позволяет принимать и корректно выводить кроме скалярных типов данных, объекты, массивы и классы.

Последним аргументом может стоять тип вывода.

По-умолчанию, вывод оборачивается в тег **<pre>**.

Тип вывода начинается с восклицательного знака **[!]**. Можно использовать следующие типы вывода:

* !stop - вывод по-умолчанию, но с остановкой выполнения PHP кода
* !q - быстрый вывод, предназначен для проверки какого-либо значения, оборачивается в квадратные скобки, чтобы было видно пустые значения
* !dump - вывод через оператор **var_export**
* !console - вывод в консоль, через **javascript** и оператор **console.log()**
* !hide - скрытый вывод, оборачивается в комментарии **<!-- -->**
