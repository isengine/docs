=================
Система библиотек
=================

Чтобы не нагружать сайт лишним содержимым, а также чтобы не было трудностей при расширении его функционала, была создана следующая система библиотек.

Библиотеки представляют собой сторонние решения, написанные на javascript, в виде php-классов, либо css стилей.

Библиотеки, в том числе такие распространенные как "jquery" и "bootstrap", тем не менее не являются частью ядра CMS. В любом случае, вы можете сами решать, использовать их или нет.

Если вы захотите их использовать при построении сайта, вам не нужно будет лишний раз проверять, загружаются они в шаблон с очередным модулем или компонентом.

В данной CMS используется следующая структура библиотек:

	"library" : {
		"css" : "css/file.min.css",
		"css_cdn" : "https://cdn.com/library/version/css/file.min.css",
		"js" : "js/file.min.js",
		"js_cdn" : "https://cdn.com/library/version/js/file.min.js",
		"js_lang" : "js/locales/{lang}.min.js",
		"jss_cdn_lang" : "https://cdn.com/library/version/js/locales/{lang}.min.js"
		"css_lang" : "css/locales/{lang}.min.css",
		"css_cdn_lang" : "https://cdn.com/library/version/css/locales/{lang}.min.css"
		"code" : "file.php"
	}
	
	где "library" - название библиотеки, которое в том числе совпадает с названием папки в разделе библиотек: /libraries/.../ и считается для текущей библиотеки родительским каталогом
	"css", "js" и "code" - соответствующие разделы библиотеки
	"_cdn" - обозначает ссылку на загрузку библиотеки из репозитория, что позволяет не хранить ее на сайте (включается соответствующим <параметры шаблона>параметром в настройках шаблона)
	"_lang" - обозначает, что к библиотеке подключается языковой файл, при этом <переменные>текстовая переменная {lang} примет языковой код сайта (например, "en" или "ru")

(!) Корневая папка /libraries/ задается константами <переменные>NAME_LIBRARIES и <переменные>PATH_LIBRARIES.

(!) Естественно, что для каждой библиотеки не обязательно указывать все перечисленные параметры.

Пример параметров для загрузки библиотеки "bootstrap":

	"bootstrap" : {
		"css" : "css/bootstrap.min.css",
		"css_cdn" : "https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css",
		"js" : "js/bootstrap.min.js",
		"js_cdn" : "https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"
	}

Описание всех библиотек хранится в файле [libraries.ini] в папке /administrator/ или в таблице "libraries" в базе данных.

====================
Добавление библиотек
====================

Добавление своих библиотек происходит по тому же принципу - нужно просто дописать библиотеку в общий список, указав нужные параметры.

==================
Загрузка библиотек
==================

В шаблоне есть параметр "libraries", в котором в виде массива перечисляются названия тех библиотек, которые нужно подключить.

Если вы используете базовый шаблон, то загрузка указанных библиотек произойдет автоматически.

Если вы не используете базовый шаблон, то вы можете использовать его элемент "libraries" между тегами {{ <head>...</head> }} вашего шаблона.

Вы также можете загрузить библиотеки вручную, указав путь к ним через константу <переменные>NAME_LIBRARIES.

(!) Пока не задана такая структура, которая будет подгружать библиотеки в разные места шаблона. Ведь некоторые библиотеки требуют загрузки или инициализации в конце шаблона, перед закрывающим тегом {{ </body> }}.
